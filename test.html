<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Sheets API Example (Netlify)</title>
    <script src="./js/sheetFun.js"></script>
    <script src="./js/fun.js"></script>
    <script>
      //const spreadsheetId = '1wfTLMxPaXse6MRJp1q3ls5AX3oV2lc5ZDn8qNOYfdLA';
      //const OnomatopoeiaSheet = 'Sheet1';

    </script>
</head>
<body>
    <div class="container">        

        <!-- Dropdown to Select Video -->
        <div class="dropdown">
            <label for="videoSelect">Change the video:</label>
            <select id="videoSelect">
            </select>
        </div>

        
    </div>

    <script>
      console.log("test");
      async function loadDriveFiles() {
        try {
          const response = await fetch('/.netlify/functions/fetch-drive-files');
          const files = await response.json();

          // Sort files alphabetically by name
          files.sort((a, b) => a.name.localeCompare(b.name));    

          const dropdown = document.getElementById('videoSelect');
          files.forEach(file => {
            const option = document.createElement('option');
            option.value = file.id;
            option.textContent = file.name;
            dropdown.appendChild(option);
          });
        } catch (err) {
          console.error(err);
        }
      }
      document.addEventListener('DOMContentLoaded', loadDriveFiles);
    </script>
</body>
</html>
